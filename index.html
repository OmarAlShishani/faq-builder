<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ Builder - AI Powered</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .api-key-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .api-key-section label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .api-key-section input,
        .api-key-section select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
            background: white;
        }

        .api-key-section input:focus,
        .api-key-section select:focus {
            outline: none;
            border-color: #667eea;
        }

        .api-key-section small {
            display: block;
            margin-top: 8px;
            color: #666;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .settings-item {
            display: flex;
            flex-direction: column;
        }

        @media (max-width: 768px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .process-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .process-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .process-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .clear-btn {
            background: #e74c3c;
            color: white;
        }

        .clear-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        .faq-item {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
        }

        .faq-item h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .section {
            margin-bottom: 20px;
        }

        .section-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .rtl {
            direction: rtl;
            text-align: right;
        }

        .ltr {
            direction: ltr;
            text-align: left;
        }

        .copy-btn {
            background: #3498db;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
            transition: background 0.3s;
        }

        .copy-btn:hover {
            background: #2980b9;
        }

        .tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
        }

        .export-section {
            margin-top: 30px;
            text-align: center;
        }

        .export-btn {
            background: #27ae60;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .export-btn:hover {
            background: #229954;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ FAQ Builder - AI Powered</h1>
            <p>Transform your questions into comprehensive FAQ content</p>
        </div>

        <div class="content">
            <div class="api-key-section">
                <h3 style="margin-bottom: 20px; color: #667eea;">‚öôÔ∏è AI Settings</h3>
                
                <div class="settings-grid">
                    <div class="settings-item">
                        <label for="aiProvider">ü§ñ AI Provider:</label>
                        <select id="aiProvider" onchange="updateProviderSettings()">
                            <option value="gemini">Google Gemini (Recommended)</option>
                            <option value="openai">OpenAI</option>
                            <option value="openrouter">OpenRouter</option>
                        </select>
                    </div>

                    <div class="settings-item">
                        <label for="aiModel">üéØ Model:</label>
                        <select id="aiModel">
                            <option value="gemini-2.0-flash">Gemini 2.0 Flash (Latest & Recommended)</option>
                            <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
                            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                            <option value="gemini-1.0-pro">Gemini 1.0 Pro</option>
                        </select>
                    </div>
                </div>

                <div style="margin-top: 15px;">
                    <label for="apiKey">üîë API Key:</label>
                    <input type="password" id="apiKey" placeholder="Enter your Google Gemini API key">
                    <small id="apiKeyHelp">Your API key is stored locally and never sent anywhere except to gemini. <a href="https://makersuite.google.com/app/apikey" target="_blank">Get your key from Google AI Studio</a></small>
                </div>
            </div>

            <div class="input-section">
                <label for="questions">üìù Enter FAQ Questions (One per line):</label>
                <textarea id="questions" placeholder="Enter your questions here, one per line...&#10;Example:&#10;How do I reset my password?&#10;ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±ÿü&#10;What payment methods do you accept?"></textarea>
            </div>

            <div class="button-group">
                <button class="process-btn" onclick="processQuestions()">üöÄ Process Questions</button>
                <button class="clear-btn" onclick="clearAll()">üóëÔ∏è Clear All</button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Processing your questions with AI... This may take a moment.</p>
            </div>

            <div class="results" id="results"></div>

            <div class="export-section" id="exportSection" style="display: none;">
                <button class="export-btn" onclick="exportToJSON()">üíæ Export to JSON</button>
            </div>
        </div>
    </div>

    <script>
        let processedData = [];

        // Model configurations for different providers
        const providerModels = {
            openai: [
                { value: 'gpt-4o-mini', label: 'GPT-4o Mini (Recommended)' },
                { value: 'gpt-4o', label: 'GPT-4o' },
                { value: 'gpt-4-turbo', label: 'GPT-4 Turbo' },
                { value: 'gpt-3.5-turbo', label: 'GPT-3.5 Turbo' }
            ],
            gemini: [
                { value: 'gemini-2.0-flash', label: 'Gemini 2.0 Flash (Latest & Recommended)' },
                { value: 'gemini-1.5-flash', label: 'Gemini 1.5 Flash' },
                { value: 'gemini-1.5-pro', label: 'Gemini 1.5 Pro' },
                { value: 'gemini-1.0-pro', label: 'Gemini 1.0 Pro' }
            ],
            openrouter: [
                { value: 'openai/gpt-4o-mini', label: 'OpenAI GPT-4o Mini' },
                { value: 'openai/gpt-4o', label: 'OpenAI GPT-4o' },
                { value: 'anthropic/claude-3.5-sonnet', label: 'Claude 3.5 Sonnet' },
                { value: 'google/gemini-pro-1.5', label: 'Gemini Pro 1.5' },
                { value: 'meta-llama/llama-3.1-70b-instruct', label: 'Llama 3.1 70B' },
                { value: 'mistralai/mistral-large', label: 'Mistral Large' }
            ]
        };

        const providerInfo = {
            openai: {
                url: 'https://platform.openai.com/api-keys',
                text: 'Get your key from OpenAI Platform'
            },
            gemini: {
                url: 'https://makersuite.google.com/app/apikey',
                text: 'Get your key from Google AI Studio'
            },
            openrouter: {
                url: 'https://openrouter.ai/keys',
                text: 'Get your key from OpenRouter'
            }
        };

        // Load settings from localStorage
        window.addEventListener('DOMContentLoaded', () => {
            const savedProvider = localStorage.getItem('ai_provider') || 'gemini';
            const savedModel = localStorage.getItem('ai_model');
            const savedApiKey = localStorage.getItem('api_key');

            document.getElementById('aiProvider').value = savedProvider;
            updateProviderSettings();
            
            if (savedModel) {
                document.getElementById('aiModel').value = savedModel;
            }
            
            if (savedApiKey) {
                document.getElementById('apiKey').value = savedApiKey;
            }
        });

        function updateProviderSettings() {
            const provider = document.getElementById('aiProvider').value;
            const modelSelect = document.getElementById('aiModel');
            const helpText = document.getElementById('apiKeyHelp');

            // Update models dropdown
            modelSelect.innerHTML = '';
            providerModels[provider].forEach(model => {
                const option = document.createElement('option');
                option.value = model.value;
                option.textContent = model.label;
                modelSelect.appendChild(option);
            });

            // Update help text
            const info = providerInfo[provider];
            helpText.innerHTML = `Your API key is stored locally and never sent anywhere except to ${provider}. <a href="${info.url}" target="_blank">${info.text}</a>`;

            // Save provider preference
            localStorage.setItem('ai_provider', provider);
        }

        async function processQuestions() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const provider = document.getElementById('aiProvider').value;
            const model = document.getElementById('aiModel').value;
            const questionsText = document.getElementById('questions').value.trim();

            if (!apiKey) {
                alert('Please enter your API key!');
                return;
            }

            if (!questionsText) {
                alert('Please enter at least one question!');
                return;
            }

            // Save settings to localStorage
            localStorage.setItem('api_key', apiKey);
            localStorage.setItem('ai_provider', provider);
            localStorage.setItem('ai_model', model);

            const questions = questionsText.split('\n').filter(q => q.trim() !== '');
            
            const loading = document.getElementById('loading');
            const results = document.getElementById('results');
            const processBtn = document.querySelector('.process-btn');

            loading.classList.add('active');
            results.classList.remove('active');
            processBtn.disabled = true;

            processedData = [];

            try {
                for (const question of questions) {
                    const result = await processQuestion(question, apiKey, provider, model);
                    processedData.push(result);
                }

                displayResults(processedData);
                document.getElementById('exportSection').style.display = 'block';
            } catch (error) {
                alert('Error processing questions: ' + error.message);
                console.error(error);
            } finally {
                loading.classList.remove('active');
                processBtn.disabled = false;
            }
        }

        async function processQuestion(question, apiKey, provider, model) {
            const prompt = `Given this FAQ question: "${question}"

Please provide a comprehensive response in the following JSON format:

{
  "original_question": "${question}",
  "rephrased": {
    "arabic": "rephrased question in Arabic",
    "english": "rephrased question in English"
  },
  "synonyms_arabic": ["synonym1", "synonym2", ... "synonym10"],
  "synonyms_english": ["synonym1", "synonym2", ... "synonym10"],
  "synonyms_arabic_formatted": ["synonym1^^with^^double^^caret", ... ],
  "synonyms_english_formatted": ["synonym1^^with^^double^^caret", ... ],
  "answers": [
    "detailed answer 1",
    "detailed answer 2",
    "detailed answer 3",
    "detailed answer 4",
    "detailed answer 5"
  ],
  "tags": ["tag1", "tag2", "tag3", "tag4", "tag5"]
}

Requirements:
1. Rephrase the question in both Arabic and English (clear and professional)
2. Create 10 synonyms/alternative phrasings for the question in Arabic
3. Create 10 synonyms/alternative phrasings for the question in English
4. For formatted synonyms, replace spaces with ^^ (double caret)
5. Generate 5 comprehensive, helpful answers to the question
6. Create 5-7 relevant tags for this question

Please respond ONLY with the JSON object, no additional text.`;

            let response, data, content;

            if (provider === 'openai') {
                response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [
                            {
                                role: 'system',
                                content: 'You are a helpful FAQ assistant that generates comprehensive, bilingual FAQ content. Always respond with valid JSON.'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        temperature: 0.7,
                        max_tokens: 3000
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'OpenAI API request failed');
                }

                data = await response.json();
                content = data.choices[0].message.content.trim();

            } else if (provider === 'gemini') {
                response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-goog-api-key': apiKey
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a helpful FAQ assistant that generates comprehensive, bilingual FAQ content. Always respond with valid JSON.\n\n${prompt}`
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 3000
                        }
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'Gemini API request failed');
                }

                data = await response.json();
                content = data.candidates[0].content.parts[0].text.trim();

            } else if (provider === 'openrouter') {
                response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`,
                        'HTTP-Referer': window.location.href,
                        'X-Title': 'FAQ Builder Tool'
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [
                            {
                                role: 'system',
                                content: 'You are a helpful FAQ assistant that generates comprehensive, bilingual FAQ content. Always respond with valid JSON.'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        temperature: 0.7,
                        max_tokens: 3000
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'OpenRouter API request failed');
                }

                data = await response.json();
                content = data.choices[0].message.content.trim();
            }

            // Extract JSON from response
            let jsonMatch = content.match(/\{[\s\S]*\}/);
            if (!jsonMatch) {
                throw new Error('Invalid JSON response from API');
            }

            return JSON.parse(jsonMatch[0]);
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            let html = '';

            data.forEach((item, index) => {
                html += `
                    <div class="faq-item">
                        <h3>Question ${index + 1}</h3>
                        
                        <div class="section">
                            <div class="section-title">
                                üìå Original Question
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.original_question)}')">Copy</button>
                            </div>
                            <div class="section-content ${detectDirection(item.original_question)}">
                                ${escapeHtml(item.original_question)}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                üîÑ Rephrased - Arabic
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.rephrased.arabic)}')">Copy</button>
                            </div>
                            <div class="section-content rtl">
                                ${escapeHtml(item.rephrased.arabic)}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                üîÑ Rephrased - English
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.rephrased.english)}')">Copy</button>
                            </div>
                            <div class="section-content ltr">
                                ${escapeHtml(item.rephrased.english)}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                üî§ Synonyms - Arabic (10)
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.synonyms_arabic.join('\\n'))}')">Copy</button>
                            </div>
                            <div class="section-content rtl">
                                ${item.synonyms_arabic.map((s, i) => `${i + 1}. ${escapeHtml(s)}`).join('\n')}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                üî§ Synonyms - English (10)
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.synonyms_english.join('\\n'))}')">Copy</button>
                            </div>
                            <div class="section-content ltr">
                                ${item.synonyms_english.map((s, i) => `${i + 1}. ${escapeHtml(s)}`).join('\n')}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                ^^üî§ Formatted Synonyms - Arabic (with ^^)
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.synonyms_arabic_formatted.join('\\n'))}')">Copy</button>
                            </div>
                            <div class="section-content rtl">
                                ${item.synonyms_arabic_formatted.map((s, i) => `${i + 1}. ${escapeHtml(s)}`).join('\n')}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                ^^üî§ Formatted Synonyms - English (with ^^)
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.synonyms_english_formatted.join('\\n'))}')">Copy</button>
                            </div>
                            <div class="section-content ltr">
                                ${item.synonyms_english_formatted.map((s, i) => `${i + 1}. ${escapeHtml(s)}`).join('\n')}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                üí° Answers (5)
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.answers.join('\\n\\n---\\n\\n'))}')">Copy</button>
                            </div>
                            <div class="section-content">
                                ${item.answers.map((a, i) => `<strong>Answer ${i + 1}:</strong><br>${escapeHtml(a)}`).join('<br><br>')}
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                üè∑Ô∏è Tags
                                <button class="copy-btn" onclick="copyToClipboard('${escapeHtml(item.tags.join(', '))}')">Copy</button>
                            </div>
                            <div class="section-content">
                                ${item.tags.map(tag => `<span class="tag">${escapeHtml(tag)}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
            resultsDiv.classList.add('active');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function detectDirection(text) {
            const arabicPattern = /[\u0600-\u06FF]/;
            return arabicPattern.test(text) ? 'rtl' : 'ltr';
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return String(text).replace(/[&<>"']/g, m => map[m]);
        }

        function copyToClipboard(text) {
            // Unescape the text
            const textarea = document.createElement('textarea');
            textarea.innerHTML = text;
            const unescapedText = textarea.value;

            navigator.clipboard.writeText(unescapedText).then(() => {
                alert('Copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        function clearAll() {
            if (confirm('Are you sure you want to clear all data?')) {
                document.getElementById('questions').value = '';
                document.getElementById('results').innerHTML = '';
                document.getElementById('results').classList.remove('active');
                document.getElementById('exportSection').style.display = 'none';
                processedData = [];
            }
        }

        function exportToJSON() {
            const provider = document.getElementById('aiProvider').value;
            const model = document.getElementById('aiModel').value;
            
            const exportData = {
                metadata: {
                    exported_at: new Date().toISOString(),
                    ai_provider: provider,
                    ai_model: model,
                    total_questions: processedData.length
                },
                data: processedData
            };

            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `faq-export-${Date.now()}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>

