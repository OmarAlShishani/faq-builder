<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FAQ Builder</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="toast-container" id="toastContainer"></div>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <a href="#" class="logo">
          <div class="logo-icon">üìã</div>
          <div class="logo-text">FAQ Builder <span>by Rawi</span></div>
        </a>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Sidebar - Steps -->
      <aside class="sidebar">
        <div class="steps-card">
          <div class="steps-title">Setup Steps</div>

          <div
            class="step active"
            data-step="1"
            onclick="scrollToCard('config')"
          >
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-label">API Settings</div>
              <div class="step-desc">Configure your connection</div>
            </div>
          </div>

          <div class="step pending" data-step="2" onclick="scrollToCard('ai')">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-label">AI Provider</div>
              <div class="step-desc">Select AI model</div>
            </div>
          </div>

          <div
            class="step pending"
            data-step="3"
            onclick="scrollToCard('questions')"
          >
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-label">Questions</div>
              <div class="step-desc">Enter FAQ questions</div>
            </div>
          </div>

          <div class="step pending" data-step="4">
            <div class="step-number">4</div>
            <div class="step-content">
              <div class="step-label">Process</div>
              <div class="step-desc">Generate & submit</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Content Area -->
      <div class="content">
        <!-- Step 1: API Configuration -->
        <div class="card" id="config">
          <div class="card-header">
            <div class="card-title">
              <div class="card-title-icon blue">üîå</div>
              API Configuration
            </div>
            <span class="card-badge required">Required</span>
          </div>
          <div class="card-body">
            <div class="helper-card">
              <span class="helper-icon">üí°</span>
              <div class="helper-content">
                <h4>Where to find these values?</h4>
                <p>
                  Get your Assistant Code, Version Code, and FAQ ID from the
                  Rawi Builder dashboard. Your JWT token is your authentication
                  key.
                </p>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">
                  Assistant Code
                  <span
                    class="hint-icon"
                    title="Found in your assistant settings"
                    >?</span
                  >
                </label>
                <input
                  type="text"
                  class="form-input"
                  id="assistantCode"
                  value="li6monObUb"
                  placeholder="e.g., li6monObUb"
                />
              </div>
              <div class="form-group">
                <label class="form-label">
                  Version Code
                  <span class="hint-icon" title="Found in your version settings"
                    >?</span
                  >
                </label>
                <input
                  type="text"
                  class="form-input"
                  id="versionCode"
                  value="li68VXoo7d"
                  placeholder="e.g., li68VXoo7d"
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">
                  FAQ ID <span class="required">*</span>
                </label>
                <input
                  type="text"
                  class="form-input"
                  id="faqId"
                  placeholder="Enter your FAQ ID"
                />
                <span class="form-hint"
                  >The unique identifier for your FAQ knowledge base</span
                >
              </div>
              <div class="form-group">
                <label class="form-label">
                  JWT Token <span class="required">*</span>
                </label>
                <input
                  type="password"
                  class="form-input"
                  id="jwt"
                  placeholder="Enter your JWT token"
                />
                <span class="form-hint">Your authentication token</span>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full">
                <label class="form-label">API Base URL</label>
                <input
                  type="text"
                  class="form-input"
                  id="baseURL"
                  value="https://builder.datakite.app"
                />
                <span class="form-hint"
                  >Default: https://builder.datakite.app</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2: AI Settings -->
        <div class="card" id="ai">
          <div class="card-header">
            <div class="card-title">
              <div class="card-title-icon green">ü§ñ</div>
              AI Provider
            </div>
            <span class="card-badge required">Required</span>
          </div>
          <div class="card-body">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Provider</label>
                <select
                  class="form-input"
                  id="aiProvider"
                  onchange="updateProviderSettings()"
                >
                  <option value="gemini">Google Gemini (Recommended)</option>
                  <option value="openai">OpenAI</option>
                  <option value="openrouter">OpenRouter</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Model</label>
                <select class="form-input" id="aiModel">
                  <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full">
                <label class="form-label">
                  API Key <span class="required">*</span>
                </label>
                <input
                  type="password"
                  class="form-input"
                  id="apiKey"
                  placeholder="Enter your AI API key"
                />
                <span class="form-hint" id="apiKeyHelp">
                  Get your key from
                  <a
                    href="https://makersuite.google.com/app/apikey"
                    target="_blank"
                    >Google AI Studio</a
                  >
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 3: Questions Input -->
        <div class="card" id="questions">
          <div class="card-header">
            <div class="card-title">
              <div class="card-title-icon yellow">‚ùì</div>
              Questions Input
            </div>
            <span class="card-badge required">Required</span>
          </div>
          <div class="card-body">
            <div class="form-group" style="margin-bottom: 20px">
              <label class="form-label">Context / Instructions</label>
              <textarea
                class="form-input"
                id="aiInstructions"
                placeholder="Example: These FAQs are for an e-commerce platform selling electronics. Focus on product support, shipping, and returns.

ŸÖÿ´ÿßŸÑ: Ÿáÿ∞Ÿá ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸÑŸÖÿ™ÿ¨ÿ± ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä. ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿØÿπŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸàÿßŸÑÿ¥ÿ≠ŸÜ ŸàÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ."
                style="min-height: 80px"
              ></textarea>
              <span class="form-hint"
                >Optional: Provide context to help AI generate more accurate
                content</span
              >
            </div>

            <div class="form-group">
              <label class="form-label">
                FAQ Questions <span class="required">*</span>
              </label>
              <textarea
                class="form-input"
                id="questionsInput"
                placeholder="Enter one question per line:

How do I track my order?
ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ™ÿ®ÿπ ÿ∑ŸÑÿ®Ÿäÿü
What is your return policy?
ŸÖÿß ŸáŸä ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπÿü"
              ></textarea>
              <span class="form-hint"
                >Enter one question per line. Mix of Arabic and English is
                supported.</span
              >
            </div>

            <div class="btn-group">
              <button
                class="btn btn-primary"
                id="processBtn"
                onclick="processQuestions()"
              >
                Process Questions
              </button>
              <button class="btn btn-secondary" onclick="clearAll()">
                Clear All
              </button>
            </div>
          </div>
        </div>

        <!-- Progress Card -->
        <div class="card progress-card" id="progressCard">
          <div class="progress-content">
            <div class="progress-spinner"></div>
            <div class="progress-title" id="progressTitle">
              Processing your questions...
            </div>
            <div class="progress-subtitle" id="progressSubtitle">
              This may take a moment
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="progress-stats">
              <div class="progress-stat">
                <span>Questions:</span>
                <strong id="progressCurrent">0</strong> /
                <span id="progressTotal">0</span>
              </div>
              <div class="progress-stat">
                <span>API Calls:</span>
                <strong id="progressAPICalls">0</strong>
              </div>
            </div>
          </div>
        </div>

        <!-- Results Card -->
        <div class="card results-card" id="resultsCard">
          <div class="card-header">
            <div class="card-title">
              <div class="card-title-icon green">‚úÖ</div>
              Processing Results
            </div>
          </div>

          <div class="stats-row">
            <div class="stat-item">
              <div class="stat-value" id="totalQuestions">0</div>
              <div class="stat-label">Questions</div>
            </div>
            <div class="stat-item">
              <div class="stat-value success" id="successCount">0</div>
              <div class="stat-label">Successful</div>
            </div>
            <div class="stat-item">
              <div class="stat-value error" id="errorCount">0</div>
              <div class="stat-label">Failed</div>
            </div>
            <div class="stat-item">
              <div class="stat-value primary" id="totalAPICalls">0</div>
              <div class="stat-label">API Calls</div>
            </div>
          </div>

          <div class="question-list" id="questionResults"></div>

          <div class="card-body" style="border-top: 1px solid var(--gray-200)">
            <div class="btn-group" style="margin-top: 0">
              <button
                class="btn btn-primary"
                onclick="retryAllFailed()"
                id="retryBtn"
                style="display: none"
              >
                Retry Failed
              </button>
              <button class="btn btn-secondary" onclick="exportResults()">
                Export Report
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="script.js"></script>
  </body>
</html>
